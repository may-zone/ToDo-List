(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],d=0;d<n.length;d++){var c=n[d],s=o.base?c[0]+o.base:c[0],l=i[s]||0,p="".concat(s," ").concat(l);i[s]=l+1;var u=t(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(m);else{var f=r(m,o);o.byIndex=d,e.splice(d,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var d=t(i[a]);e[d].references--}for(var c=o(n,r),s=0;s<i.length;s++){var l=t(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var d=0;d<this.length;d++){var c=this[d][0];null!=c&&(a[c]=!0)}for(var s=0;s<n.length;s++){var l=[].concat(n[s]);o&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},365:(n,e,t)=>{t.d(e,{A:()=>d});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,'*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n:root {\n  --sidebar-width: 280px;\n}\n\nbody {\n  margin: 0;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;\n  background: #fdfeff00;\n  color: #fff;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  padding: 0.75rem 1rem;\n  background: #222;\n  width: calc(100% - var(--sidebar-width));\n  margin-left: var(--sidebar-width);\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.app-title {\n  margin: 0;\n  font-size: 1.25rem;\n}\n\n.header-search {\n  flex: 1;\n  max-width: 420px;\n  background: rgba(127, 129, 134, 0.5);\n  border-radius: 999px;\n  border: 1px solid rgba(15, 23, 42, 0.4);\n  padding: 0.2rem 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n}\n\n.header-search input {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: inherit;\n  font: inherit;\n}\n\n.header-search input::placeholder {\n  color: rgba(15, 23, 42, 0.7);\n}\n\n.header-search input:focus {\n  outline: none;\n}\n\n.search-icon {\n  display: flex;\n  align-items: center;\n  color: rgba(15, 23, 42, 0.7);\n}\n\n.search-icon svg {\n  display: block;\n}\n\n.project-toggle {\n  border: none;\n  background: transparent;\n  font-size: 1.5rem;\n  cursor: pointer;\n  display: none;\n  color: #111827;\n}\n\n.user-btn {\n  width: 32px;\n  height: 32px;\n  border-radius: 999px;\n  border: none;\n  background: #111;\n  cursor: pointer;\n}\n.user-btn img {\n  width: 100%;\n  height: 100%;\n  border-radius: 999px;\n  object-fit: cover;\n}\n\n.header-user {\n  display: flex;\n  align-items: center;\n  gap: 0.6rem;\n}\n\n.user-info {\n  display: flex;\n  flex-direction: column;\n  line-height: 1.1;\n}\n\n.user-name {\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.user-email {\n  font-size: 0.75rem;\n  color: rgba(82, 133, 255, 0.8);}\n\n.layout {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  width: calc(100% - var(--sidebar-width));\n  margin-left: var(--sidebar-width);\n}\n\n.sidebar {\n  background: #222;\n  padding: 1rem 0.75rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: var(--sidebar-width);\n  overflow-y: auto;\n  z-index: 15;\n  border-right: 4px solid rgba(15, 23, 42, 0.35);\n}\n\n.sidebar h2 {\n  margin: 0;\n  font-size: 2rem;\n}\n\n.sidebar-title {\n  display: flex;\n  align-items: center;\n  gap: 0.45rem;\n}\n\n[data-project-list] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n}\n\n[data-project-list] li {\n  margin-bottom: 0.3rem;\n}\n\n.project-item {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n}\n\n.project-select-btn {\n  width: 100%;\n  padding: 0.4rem 0.6rem;\n  border-radius: 0.4rem;\n  border: none;\n  background: transparent;\n  color: inherit;\n  text-align: left;\n  cursor: pointer;\n}\n\n.project-select-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.project-delete-btn {\n  border: none;\n  background: transparent;\n  color: #f87171;\n  font-size: 1rem;\n  cursor: pointer;\n  padding: 0.2rem 0.3rem;\n  line-height: 1;\n}\n\n.project-delete-btn:hover {\n  color: #ef4444;\n}\n\n.active-project {\n  background: rgba(0, 0, 0, 0.2);\n  font-weight: 600;\n}\n\n.add-project-btn {\n  border-radius: 0.75rem;\n  border: 1px solid rgba(15, 23, 42, 0.2);\n  padding: 0.65rem 0.9rem;\n  cursor: pointer;\n  width: 100%;\n  background: linear-gradient(135deg, #0f172a, #1d4ed8);\n  color: #f8fafc;\n  font-weight: 600;\n  text-align: left;\n  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.2);\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.add-project-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);\n}\n\n.sidebar-actions {\n  margin-top: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 0.4rem;\n  padding-top: 0.75rem;\n  border-top: 1px solid rgba(15, 23, 42, 0.25);\n}\n\n.sidebar-action {\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.45rem 0.7rem;\n  cursor: pointer;\n  font: inherit;\n  background: rgba(15, 23, 42, 0.2);\n  color: inherit;\n  text-align: left;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.sidebar-action:hover {\n  background: rgba(15, 23, 42, 0.35);\n}\n\n.sidebar-action-icon {\n  width: 20px;\n  height: 20px;\n}\n\n.sidebar-title-icon {\n  width: 28px;\n  height: 28px;\n}\n\n.main {\n  position: relative;\n  padding: 1rem;\n  padding-bottom: 4.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  min-height: 0;\n  flex: 1;\n}\n\n[data-project-title] {\n  margin: 0;\n  font-size: 1.3rem;\n}\n\n[data-todo-list] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n  gap: 0.75rem;\n}\n\n.todo-item {\n  position: relative;\n  perspective: 1200px;\n  min-height: 220px;\n  aspect-ratio: 1 / 1;\n  list-style: none;\n  --card-bg: #d97706;\n  --card-border: rgba(249, 115, 22, 0.9);\n  --card-shadow: rgba(15, 23, 42, 0.45);\n}\n\n.todo-item.priority-low {\n  --card-bg: #15803d;\n  --card-border: rgba(34, 197, 94, 0.8);\n}\n\n.todo-item.priority-high {\n  --card-bg: #b91c1c;\n  --card-border: rgba(248, 113, 113, 0.85);\n}\n\n.todo-card {\n  width: 100%;\n  height: 100%;\n}\n\n.todo-card-inner {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  transform-style: preserve-3d;\n  transition: transform 0.6s ease, box-shadow 0.2s ease;\n  box-shadow: 0 10px 25px var(--card-shadow);\n  border-radius: 0.9rem;\n}\n\n.todo-item:hover:not(.is-open) .todo-card-inner {\n  transform: translateY(-4px);\n}\n\n.todo-item.is-open .todo-card-inner {\n  transform: rotateY(180deg);\n}\n\n.todo-card-face {\n  position: absolute;\n  inset: 0;\n  background: var(--card-bg);\n  color: #f8fafc;\n  border: 2px solid var(--card-border);\n  border-radius: 0.9rem;\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.4rem;\n  backface-visibility: hidden;\n  cursor: pointer;\n}\n\n.todo-card-front {\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  font-size: 1rem;\n}\n\n.todo-card-back {\n  transform: rotateY(180deg);\n  font-size: 0.85rem;\n  gap: 0.5rem;\n  justify-content: flex-start;\n  overflow-y: auto;\n}\n\n.todo-title {\n  margin: 0;\n  font-size: 1.2rem;\n}\n\n.todo-row {\n  margin: 0.2rem 0;\n  display: flex;\n  gap: 0.3rem;\n}\n\n.todo-row span:first-child {\n  font-weight: 600;\n}\n\n.todo-actions {\n  margin-top: 0.4rem;\n  display: flex;\n  gap: 0.4rem;\n}\n\n.todo-actions button {\n  flex: 1;\n  border: none;\n  border-radius: 0.4rem;\n  padding: 0.3rem 0.4rem;\n  font-size: 0.8rem;\n  cursor: pointer;\n  background: rgba(15, 23, 42, 0.35);\n  color: #f8fafc;\n}\n\n.todo-actions button:hover {\n  background: rgba(15, 23, 42, 0.55);\n}\n\n.todo-item.todo-done .todo-title {\n  text-decoration: line-through;\n  opacity: 0.6;\n}\n\n.add-todo-fab {\n  position: absolute;\n  right: 1.5rem;\n  bottom: 1.5rem;\n  width: 56px;\n  height: 56px;\n  border-radius: 999px;\n  border: none;\n  font-size: 2rem;\n  background: #4d48ec;\n  color: #fff;\n  cursor: pointer;\n}\n\n.footer {\n  padding: 0.3rem 1rem;\n  background: #222;\n  color: hsl(0, 0%, 100%);\n  text-align: center;\n  width: calc(100% - var(--sidebar-width));\n  margin-left: var(--sidebar-width);\n  font-size: 0.85rem;\n}\n\n.modal-backdrop {\n  position: fixed;\n  inset: 0;\n  background: rgba(15, 23, 42, 0.6);\n  z-index: 20;\n}\n\n.modal {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 30;\n}\n\n.modal-content {\n  background: #0f172a;\n  padding: 1rem;\n  border-radius: 0.75rem;\n  width: min(420px, 90vw);\n  display: flex;\n  flex-direction: column;\n  gap: 0.6rem;\n}\n\n.modal-content h2 {\n  margin: 0 0 0.4rem;\n}\n\n.modal-content label {\n  display: flex;\n  flex-direction: column;\n  font-size: 0.9rem;\n  gap: 0.2rem;\n}\n\n.modal-content input,\n.modal-content textarea,\n.modal-content select {\n  border-radius: 0.4rem;\n  border: 1px solid rgba(148, 163, 184, 0.8);\n  padding: 0.3rem 0.4rem;\n  font: inherit;\n}\n\n.modal-content textarea {\n  resize: vertical;\n  min-height: 70px;\n}\n\n.modal-actions {\n  margin-top: 0.4rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n}\n\n.modal-actions button {\n  border-radius: 0.4rem;\n  border: none;\n  padding: 0.4rem 0.7rem;\n  cursor: pointer;\n}\n\n.hidden {\n  display: none;\n}\n\n@media (max-width: 768px) {\n  :root {\n    --sidebar-width: 240px;\n  }\n\n  .header,\n  .layout,\n  .footer {\n    width: 100%;\n    margin: 0;\n  }\n\n  .header {\n    flex-wrap: wrap;\n  }\n\n  .header-search {\n    order: 3;\n    width: 100%;\n    max-width: none;\n  }\n\n  .project-toggle {\n    display: inline-block;\n  }\n\n  .sidebar {\n    top: 0;\n    width: var(--sidebar-width);\n    transform: translateX(-100%);\n    transition: transform 0.2s ease;\n    left: 0;\n    border-right: none;\n  }\n\n  .sidebar.is-open {\n    transform: translateX(0);\n  }\n\n  .add-todo-fab {\n    right: 1rem;\n  }\n}\n',""]);const d=a},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(n=e.currentScript.src),!n)){var o=e.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!n||!/^http(s?):/.test(n));)n=o[r--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),t.nc=void 0;var o=t(72),r=t.n(o),i=t(825),a=t.n(i),d=t(659),c=t.n(d),s=t(56),l=t.n(s),p=t(540),u=t.n(p),m=t(113),f=t.n(m),g=t(365),h={};h.styleTagTransform=f(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=u(),r()(g.A,h),g.A&&g.A.locals&&g.A.locals;const b=[],y={create({title:n,descriptions:e,date:t,note:o,priority:r="normal",isDone:i=!1,id:a}){const d=function({title:n,descriptions:e,date:t,note:o,priority:r="normal",isDone:i=!1,id:a=crypto.randomUUID()}){return{id:a,title:n,descriptions:e,date:t,note:o,priority:r,isDone:i,toggleDone(){this.isDone=!this.isDone},edit(n){Object.assign(this,n)}}}({title:n,descriptions:e,date:t,note:o,priority:r,isDone:i,id:a});return b.push(d),d},getAll:()=>[...b],getById:n=>b.find(e=>e.id===n)||null,update(n,e){const t=b.find(e=>e.id===n);t&&t.edit(e)},toggleDone(n){const e=b.find(e=>e.id===n);e&&e.toggleDone()},remove(n){const e=b.findIndex(e=>e.id===n);-1!==e&&b.splice(e,1)}};function v(n,{id:e=crypto.randomUUID(),todos:t=[]}={}){let o=n;const r=e,i=[...t];return{get id(){return r},get title(){return o},addTodo:function(n){i.push(n)},removeTodo:function(n){const e=i.findIndex(e=>e.id===n);-1!==e&&i.splice(e,1)},getTodos:function(){return[...i]},editTitle:function(n){"string"==typeof n&&n.trim()&&(o=n.trim())}}}let x,w,j,C,k,E,L,T,D,P,S,A,I,z,q={getProjects:()=>[],getActiveProject:()=>null,getActiveProjectTodos:()=>[],onAddProject:n=>{},onChangeProject:n=>{},onDeleteProject:n=>{},onAddTodo:n=>{},onToggleTodo:n=>{},onDeleteTodo:n=>{}};function F(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function N(n,e){const t=document.createElement("p");t.classList.add("todo-row");const o=document.createElement("span");o.textContent=n;const r=document.createElement("span");return r.textContent=e||"",t.appendChild(o),t.appendChild(r),t}function M(){const n=q.getActiveProjectTodos(),e=q.getActiveProject();j.textContent=e?e.title:"",F(w),n.forEach(n=>{const e=function(n){const e=document.createElement("li");e.classList.add("todo-item");const t=(n.priority||"").toLowerCase();let o="medium";"low"===t?o="low":"high"===t&&(o="high"),e.classList.add(`priority-${o}`),n.isDone&&e.classList.add("todo-done");const r=document.createElement("div");r.classList.add("todo-card");const i=document.createElement("div");i.classList.add("todo-card-inner");const a=document.createElement("div");a.classList.add("todo-card-face","todo-card-front"),a.setAttribute("role","button"),a.tabIndex=0;const d=document.createElement("h3");d.classList.add("todo-title"),d.textContent=n.title,a.appendChild(d);const c=document.createElement("div");c.classList.add("todo-card-face","todo-card-back"),c.appendChild(N("Due:",n.date||"no date")),n.descriptions&&c.appendChild(N("Description:",n.descriptions)),n.note&&c.appendChild(N("Note:",n.note)),c.appendChild(N("Priority:",n.priority||"medium"));const s=document.createElement("p");s.classList.add("todo-row");const l=document.createElement("span");l.textContent="Done:";const p=document.createElement("span"),u=document.createElement("input");u.type="checkbox",u.checked=n.isDone,u.addEventListener("change",e=>{e.stopPropagation(),q.onToggleTodo(n.id),M()}),p.appendChild(u),s.appendChild(l),s.appendChild(p),c.appendChild(s);const m=document.createElement("div");m.classList.add("todo-actions");const f=document.createElement("button");f.type="button",f.textContent="Delete",f.addEventListener("click",e=>{e.stopPropagation(),q.onDeleteTodo(n.id),M()}),m.appendChild(f),c.appendChild(m);const g=()=>{e.classList.toggle("is-open")};return a.addEventListener("click",n=>{n.stopPropagation(),g()}),a.addEventListener("keydown",n=>{"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),g())}),r.addEventListener("click",n=>{e.classList.contains("is-open")&&(n.target.closest("button, input, textarea, select")||e.classList.remove("is-open"))}),i.appendChild(a),i.appendChild(c),r.appendChild(i),e.appendChild(r),e}(n);w.appendChild(e)})}function U(){!function(){const n=q.getProjects(),e=q.getActiveProject();F(x),n.forEach(n=>{const t=document.createElement("li");t.classList.add("project-item");const o=document.createElement("button");o.classList.add("project-select-btn"),o.textContent=n.title,o.dataset.id=n.id,e&&n.id===e.id&&o.classList.add("active-project"),o.addEventListener("click",()=>{q.onChangeProject(n.id),U()});const r=document.createElement("button");r.type="button",r.classList.add("project-delete-btn"),r.setAttribute("aria-label",`Delete project ${n.title}`),r.textContent="Ã—",r.addEventListener("click",e=>{e.stopPropagation(),q.onDeleteProject(n.id),U()}),t.appendChild(o),t.appendChild(r),x.appendChild(t)})}(),M()}function O(){if(!D)return;const n=!P||P.classList.contains("hidden"),e=!E||E.classList.contains("hidden");n&&e?D.classList.add("hidden"):D.classList.remove("hidden")}function Y(){P&&(P.classList.remove("hidden"),O())}function $(){P&&(P.classList.add("hidden"),O())}function B(){E&&(E.classList.remove("hidden"),O())}function J(){E&&(E.classList.add("hidden"),O())}function R(){$(),J()}function H(){z&&z.classList.toggle("is-open")}const X="todo-app-state";function _(){try{return"undefined"!=typeof window&&void 0!==window.localStorage}catch{return!1}}const G=t.p+"08db25327bd0a044c06e.svg",K=t.p+"70a39fb5c04bd16dada2.svg",Q=t.p+"ff5b1cea70c1ea8ff75b.svg",V=t.p+"2d96d3a5ba8190b4277b.svg";let W=[],Z=null;function nn(n){const e=v(n);return W.push(e),Z=e,dn(),e}function en({title:n,descriptions:e,date:t,note:o,priority:r="normal",isDone:i=!1}){if(!Z)return;const a=y.create({title:n,descriptions:e,date:t,note:o,priority:r,isDone:i});return Z.addTodo(a),dn(),a}function tn(){return Z?Z.getTodos():[]}function on(){return[...W]}function rn(){return Z}function an(n){const e=W.find(e=>e.id===n);e&&(Z=e,dn())}function dn(){!function(n,e){if(!_())return;const t={projects:n.map(n=>({id:n.id,title:n.title,todos:n.getTodos().map(n=>({id:n.id,title:n.title,descriptions:n.descriptions||"",date:n.date||"",note:n.note||"",priority:n.priority||"normal",isDone:!!n.isDone}))})),currentProjectId:e||null};try{window.localStorage.setItem(X,JSON.stringify(t))}catch(n){console.error("Failed to save state",n)}}(W,Z?Z.id:null)}var cn;(function(){const n=function(){if(!_())return null;const n=window.localStorage.getItem(X);if(!n)return null;try{const e=JSON.parse(n);return e&&Array.isArray(e.projects)?e:null}catch(n){return console.error("Failed to parse saved state",n),null}}();if(!n)return!1;try{return W=n.projects.map(n=>{const e=v(n.title,{id:n.id});return(n.todos||[]).forEach(n=>{const t=y.create({title:n.title,descriptions:n.descriptions,date:n.date,note:n.note,priority:n.priority,isDone:n.isDone,id:n.id});e.addTodo(t)}),e}),Z=W.find(e=>e.id===n.currentProjectId)||W[0]||null,W.length>0}catch(n){return console.error("Failed to hydrate projects",n),W=[],Z=null,!1}})()||(function(){const n=v("Inbox");W.push(n),Z=n}(),en({title:"Go Fuck YourSelf",descriptions:"because im angry right now !",date:"every day",note:"just kidding",priority:"high"}),dn()),cn={getProjects:on,getActiveProject:rn,getActiveProjectTodos:tn,onAddProject:n=>{nn(n)},onChangeProject:n=>{an(n)},onDeleteProject:n=>{!function(n){const e=W.findIndex(e=>e.id===n);-1!==e&&(W.splice(e,1),Z&&Z.id===n&&(Z=W[0]||null),dn())}(n)},onAddTodo:n=>{en(n)},onToggleTodo:n=>{!function(n){const e=tn().find(e=>e.id===n);e&&"function"==typeof e.toggleDone&&(e.toggleDone(),dn())}(n)},onDeleteTodo:n=>{!function(n){Z&&(Z.removeTodo(n),dn())}(n)}},x=document.querySelector("[data-project-list]"),w=document.querySelector("[data-todo-list]"),j=document.querySelector("[data-project-title]"),C=document.querySelector("[data-add-project-button]"),k=document.querySelector("[data-new-project-form]"),E=document.querySelector("[data-project-modal]"),L=document.querySelector("[data-close-project-modal]"),T=document.querySelector("[data-new-todo-form]"),D=document.querySelector("[data-modal-backdrop]"),P=document.querySelector("[data-todo-modal]"),S=document.querySelector("[data-open-todo-modal]"),A=document.querySelector("[data-close-todo-modal]"),I=document.querySelector("[data-project-toggle]"),z=document.querySelector("[data-project-sidebar]"),q={...q,...cn},C&&C.addEventListener("click",B),k&&k.addEventListener("submit",n=>{n.preventDefault();const e=(new FormData(k).get("projectTitle")||"").trim();e&&(q.onAddProject(e),k.reset(),J(),U())}),L&&L.addEventListener("click",J),T&&T.addEventListener("submit",n=>{n.preventDefault();const e=new FormData(T),t={title:(e.get("title")||"").trim(),descriptions:e.get("descriptions")||"",date:e.get("date")||"",note:e.get("note")||"",priority:e.get("priority")||"normal",isDone:!1};t.title&&(q.onAddTodo(t),T.reset(),M(),$())}),S&&S.addEventListener("click",Y),A&&A.addEventListener("click",$),D&&D.addEventListener("click",R),I&&I.addEventListener("click",H),U(),window.app={projects:W,getAllProjects:on,getActiveProject:rn,getActiveProjectTodos:tn,createNewProject:nn,setActiveProject:an,addTodoToActiveProject:en,todoController:y};const sn=document.querySelector(".user-btn"),ln=document.createElement("img");function pn(n,e,t,o="sidebar-action-icon"){const r=document.querySelector(n);if(!r)return;const i=document.createElement("img");i.src=e,i.alt=t,i.classList.add(o);const a=document.createElement("span");a.textContent=r.textContent.trim(),r.textContent="",r.appendChild(i),r.appendChild(a)}ln.src=G,ln.alt="User icon",sn.appendChild(ln),pn("[data-sidebar-title]",V,"Projects icon","sidebar-title-icon"),pn("[data-sidebar-settings]",K,"Settings icon"),pn("[data-sidebar-logout]",Q,"Logout icon")})();